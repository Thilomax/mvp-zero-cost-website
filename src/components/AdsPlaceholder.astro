---
/**
 * Safe Ad/affiliate placeholder.
 * Turns on AdSense only when PUBLIC_ENABLE_ADS === "true" AND PUBLIC_ADSENSE_CLIENT is set.
 * Otherwise renders a neutral placeholder (no external requests).
 */
const enableAds =
  String(import.meta.env.PUBLIC_ENABLE_ADS ?? 'false').toLowerCase() === 'true';

const adsClient = String(import.meta.env.PUBLIC_ADSENSE_CLIENT ?? '');
---

{enableAds && adsClient ? (
  <>
    {/* AdSense loader (will be blocked by CSP until you allowlist if you keep a strict CSP) */}
    <script
      async
      src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${adsClient}`}
      crossOrigin="anonymous"
    ></script>

    {/* Simple ad slot placeholder – replace with your own ad unit if desired */}
    <div class="my-6 p-4 border rounded bg-neutral-light text-sm text-neutral-dark">
      Ads enabled. (AdSense client: {adsClient}) Replace this with your ad unit markup.
    </div>
  </>
) : (
  <div class="my-6 p-4 border rounded bg-neutral-light text-sm text-neutral-dark">
    House ad / placeholder. Turn on ads by setting:
    <code class="ml-2">PUBLIC_ENABLE_ADS=true</code> and
    <code class="ml-2">PUBLIC_ADSENSE_CLIENT=ca-pub-xxxxxxxxxxxxxxxx</code>
    in Cloudflare Pages → Settings → Environment variables.
  </div>
)}
