---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdsPlaceholder from '../../components/AdsPlaceholder.astro';
import cards from '../../data/cards.json';

const { id } = Astro.params;
const card = cards.find((c) => c.id === id);
if (!card) {
  throw new Error(`Card with id '${id}' not found`);
}

---
<BaseLayout title={`${card.name} – Review & Details`} description={`Learn about ${card.name}: rewards, fees, interest rates and more.`} canonical={`https://example.pages.dev/cards/${card.id}`} ogImage="/og-${card.id}.jpg">
  <section class="max-w-4xl mx-auto px-4 py-12">
    <h1 class="text-3xl font-bold mb-4">{card.name} Review</h1>
    <p class="mb-6">{card.description}</p>
    <div class="overflow-x-auto">
      <table class="min-w-full text-sm mb-6">
        <tbody>
          <tr class="border-b">
            <th class="p-2 text-left font-semibold">Issuer</th>
            <td class="p-2">{card.issuer}</td>
          </tr>
          <tr class="border-b">
            <th class="p-2 text-left font-semibold">Annual fee</th>
            <td class="p-2">{card.annual_fee === 0 ? '0 kr' : `${card.annual_fee} kr`}</td>
          </tr>
          <tr class="border-b">
            <th class="p-2 text-left font-semibold">Interest rate</th>
            <td class="p-2">{card.interest_rate}%</td>
          </tr>
          <tr class="border-b">
            <th class="p-2 text-left font-semibold">Rewards</th>
            <td class="p-2">{card.rewards}</td>
          </tr>
          <tr class="border-b">
            <th class="p-2 text-left font-semibold">Travel insurance</th>
            <td class="p-2">{card.insurance ? 'Yes' : 'No'}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <a href={card.affiliate_url} class="inline-block px-8 py-3 bg-accent text-white font-semibold rounded shadow hover:bg-accent-dark" rel="nofollow noopener" target="_blank" data-affiliate="true">Apply Now</a>
    <p class="text-xs text-neutral-dark mt-2">Disclosure: We may earn a commission if you apply for this card through our link. This does not affect our recommendations.</p>
  </section>
  <AdsPlaceholder />
</BaseLayout>